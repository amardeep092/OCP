### To Install the DNS Package 'bind-utils & bind'
    
    [root@bastion ~]# yum install bind-utils bind -y

### Update the File - named.conf file
[root@bastion named]# cat /etc/named.conf
//
// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//

options {
        listen-on port 53 { 192.168.2.250; };
##      listen-on-v6 port 53 { ::1; };
        directory       "/var/named";
        dump-file       "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        secroots-file   "/var/named/data/named.secroots";
        recursing-file  "/var/named/data/named.recursing";
        allow-query     { 192.168.2.0/24; };

        /*
         - If you are building an AUTHORITATIVE DNS server, do NOT enable recursion.
         - If you are building a RECURSIVE (caching) DNS server, you need to enable
           recursion.
         - If your recursive DNS server has a public IP address, you MUST enable access
           control to limit queries to your legitimate users. Failing to do so will
           cause your server to become part of large scale DNS amplification
           attacks. Implementing BCP38 within your network would greatly
           reduce such attack surface
        */
        recursion yes;

        dnssec-validation yes;

        managed-keys-directory "/var/named/dynamic";
        geoip-directory "/usr/share/GeoIP";

        pid-file "/run/named/named.pid";
        session-keyfile "/run/named/session.key";

        /* https://fedoraproject.org/wiki/Changes/CryptoPolicy */
        include "/etc/crypto-policies/back-ends/bind.config";
};

logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};

zone "ocp4.redhat-workshop.in" IN {
        type master;
        file "for";
};

zone "2.168.192.in-addr.arpa" IN {
        type master;
        file "rev";
};
include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";


[root@bastion ~]# cd /var/named

[root@bastion named]# ll
total 16
drwxrwx---. 2 named named    6 Jul 10 20:52 data
drwxrwx---. 2 named named    6 Jul 10 20:52 dynamic
-rw-r-----. 1 root  named 2112 Jul 10 20:53 named.ca
-rw-r-----. 1 root  named  152 Jul 10 20:53 named.empty
-rw-r-----. 1 root  named  152 Jul 10 20:53 named.localhost
-rw-r-----. 1 root  named  168 Jul 10 20:53 named.loopback
drwxrwx---. 2 named named    6 Jul 10 20:52 slaves

[root@bastion named]# cp named.localhost for

[root@bastion named]# cat for
$TTL 1D
@       IN SOA root.ocp4.redhat-workshop.in. bastion.ocp4.redhat-workshop.in. (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
@       IN      NS      bastion.ocp4.redhat-workshop.in.
@       IN      A       192.168.2.250
bastion.ocp4.redhat-workshop.in.        IN      A        192.168.2.250
api.ocp4.redhat-workshop.in.            IN      A        192.168.2.250
api-int.ocp4.redhat-workshop.in.        IN      A        192.168.2.250
*.apps.ocp4.redhat-workshop.in.         IN      A        192.168.2.250
master1.ocp4.redhat-workshop.in.        IN      A        192.168.2.3


[root@bastion named]# cat rev
$TTL 1D
@       IN SOA root.ocp4.redhat-workshop.in. bastion.ocp4.redhat-workshop.in. (
                                        0       ; serial
                                        1D      ; refresh
                                        1H      ; retry
                                        1W      ; expire
                                        3H )    ; minimum
@       IN      NS      bastion.ocp4.redhat-workshop.in.
250                                     IN      PTR      bastion.ocp4.redhat-workshop.in.
250                                     IN      PTR      api.ocp4.redhat-workshop.in.
250                                     IN      PTR      api-int.ocp4.redhat-workshop.in.
3                                       IN      PTR      master1.ocp4.redhat-workshop.in.
[root@bastion named]#


[root@bastion named]# chown root:named for rev
[root@bastion named]# ll
total 24
drwxrwx---. 2 named named    6 Jul 10 20:52 data
drwxrwx---. 2 named named    6 Jul 10 20:52 dynamic
-rw-r-----. 1 root  named  503 Oct  2 00:55 for
-rw-r-----. 1 root  named 2112 Jul 10 20:53 named.ca
-rw-r-----. 1 root  named  152 Jul 10 20:53 named.empty
-rw-r-----. 1 root  named  152 Jul 10 20:53 named.localhost
-rw-r-----. 1 root  named  168 Jul 10 20:53 named.loopback
-rw-r-----. 1 root  named  707 Oct  2 00:59 rev
drwxrwx---. 2 named named    6 Jul 10 20:52 slaves

Start and Enable the named.service 
[root@bastion named]# systemctl enable --now named.service
Created symlink /etc/systemd/system/multi-user.target.wants/named.service â†’ /usr/lib/systemd/system/named.service.

[root@bastion named]# dig -x 192.168.2.250

; <<>> DiG 9.16.23-RH <<>> -x 192.168.2.250
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 58582
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; udp: 1232
; COOKIE: e54017810f952c9d0100000068dd878835657c58a02858bc (good)
;; QUESTION SECTION:
;250.2.168.192.in-addr.arpa.    IN      PTR

;; ANSWER SECTION:
250.2.168.192.in-addr.arpa. 86400 IN    PTR     bastion.ocp4.redhat-workshop.in.
250.2.168.192.in-addr.arpa. 86400 IN    PTR     api.ocp4.redhat-workshop.in.
250.2.168.192.in-addr.arpa. 86400 IN    PTR     api-int.ocp4.redhat-workshop.in.

;; Query time: 1 msec
;; SERVER: 192.168.2.250#53(192.168.2.250)
;; WHEN: Thu Oct 02 01:26:56 IST 2025
;; MSG SIZE  rcvd: 168

[root@bastion named]# cat /etc/selinux/config | grep SELINUX
# SELINUX= can take one of these three values:
# NOTE: Up to RHEL 8 release included, SELINUX=disabled would also
SELINUX=disabled
# SELINUXTYPE= can take one of these three values:
SELINUXTYPE=targeted

